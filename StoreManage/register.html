<!DOCTYPE html>
<html>
  <head>
    <link href="../Libs/bootstrap-3.3.5-dist/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <link href="../Libs/bootstrap-3.3.5-dist/css/bootstrap-theme.min.css" rel="stylesheet" type="text/css" />
    <link href="../Libs/icons/css/font-awesome.min.css" rel="stylesheet" type="text/css" />
    <script src="../Libs/bootstrap-3.3.5-dist/js/bootstrap.min.js" type="text/javascript"></script>
    <link href="regStyle.css" rel="stylesheet" type="text/css" />
    <link href="style.css" rel="stylesheet" type="text/css" />
    <meta charset="utf-8">
    <script>
      function myFocus(){
        document.getElementById("userName").focus();
      }   //用户进入页面时自动对焦到userName。

      function setCookie(str,strValue){
        // var exp = new Date();
        // exp.setTime(exp.getTime()+1*24*60*60*1000);
        // document.cookie = str + "=" +strValue + ";expires=" + exp.toGMTString();
        // location.href = "login.html";

        var exdate=new Date();
　　　　exdate.setDate(exdate.getDate() + expiredays);
　　　　document.cookie=str+ "=" + escape(strValue) + ((expiredays==null) ? "" : ";expires="+exdate.toGMTString());
      // window.location.href = "login.html";
      }

      function validateRegister(){
        var userNameValue = document.getElementById("userName").value;
        var passwordValue = document.getElementById("password").value;
        var rePasswordValue = document.getElementById("rePassword").value;
        if(blurUserName(userName) && blurPassword(password) && blurPwdOk(rePassword)){
          setCookie("userName",userNam);
          setCookie("password",passwor);
          window.location.href = "login.html";
        }
      }
      //在注册界面，输入用户名，密码和重复密码以后，界面显示密码和重复密码一致，但是在点击“注册”以后
      //程序运行 function validateRegister()函数，无相应（没有跳转到login.hmtl页面）
      //但是”重复密码”框后文字变为两次密码不一致。很是费解。肯定不是blur函数的问题，
      //问题就出在setCookie()和validateRegister()函数上。
      //但是爸爸我找不出来原因。。。。。。

      function blurUserName(userName){
        if (userName == null || userName == "") {
            checkName.innerHTML = "用户名不能为空";
        }
        else {
            checkName.innerHTML = "用户名可用";
            return true;
        }
      }

      function blurPassword(password){
        if (password == null || password == "") {
            checkPwd.innerHTML = "密码不能为空";
        }
        else  {
          checkPwd.innerHTML = "密码可用";
          return true;
        }
      }

      function blurPwdOk(rePassword){
        var password = document.getElementById("password").value;
        if (rePassword == null || rePassword == "") {
            checkOk.innerHTML = "确认密码输入不能为空";
        }else if (rePassword != password) {
            checkOk.innerHTML = "两次输入的密码不一致";
        }else {
            checkOk.innerHTML = "输入正确";
            return true;
        }
      }

    </script>
    <title>注册</title>
  </head>
  <body onload="myFocus();">
    <nav class="navbar navbar-default" role="navigation">
      <div class="container-fluid">
        <div class="navbar-header">
          <a class="navbar-brand" href="#">商店管理系统人员注册</a>
        </div>
      </div>
    </nav>
    <div class="row">
      <div class="col-xs-3"></div>
      <div class="col-xs-3">
        <div class="regTitle">商店管理系统人员注册</div>
        <div class="regPanel">
            <div class="regBezel">
              用&nbsp户&nbsp名：&nbsp<input type="text" id="userName" name="userName" placeholder="用户名"
              onblur="blurUserName(this.value)" >
              <span class="userName"><i class="fa fa-user"></i></span>
              <span id="checkName"></span><br><br>


              密&nbsp&nbsp&nbsp&nbsp码：&nbsp&nbsp&nbsp<input type="password" id="password" name="password" placeholder="密码"
              onblur="blurPassword(this.value)">
              <span class="pwd"><i class="fa fa-key"></i></span>
              <span id="checkPwd"></span><br><br>


              重复密码：<input type="password" id="rePassword" name="rePassword" placeholder="重复密码"
              onblur="blurPwdOk(this.value)">
              <span class="repwd"><i class="fa fa-key"></i></span>
              <span id="checkOk"></span><br><br>


              <div class="reg">
              <button class="Button" onclick="validateRegister()">注册</button>
              <button class="Button" onclick=window.location.href="login.html">登录系统</button>
            </div>
            </div>
        </div>
      </div>
      <div class="col-xs-3"></div>
    </div>
  </body>
</html>
